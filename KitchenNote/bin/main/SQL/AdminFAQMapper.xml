<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="admin">

	<select id="listAll" resultType="yh.admin.controller.AdminFaqDto" parameterType="yh.admin.controller.FilterDto">
		select * 
		from Admin_FAQ	
		<where>
		<if test= 'order == "menu"'>
		  menu
		  like CONCAT('%',#{search},'%')
 		</if>
 		
 		<if test='order == "viewcnt"'>
		  and viewcnt
		  like CONCAT('%',#{search},'%')
 		</if>
 		</where>
		order by bno desc 
		limit #{start}, 10

	</select>
	
	<select id="count" resultType="int">
		select count(*) from Admin_FAQ
	</select>
	
	<insert id="insert" parameterType="yh.admin.controller.AdminFaqDto">
		insert into Admin_FAQ values(
		#{bno},
		#{title}, #{content},#{menu},#{viewcnt}
		)
	</insert>

	<select id="view" resultType="yh.admin.controller.AdminFaqDto">
		select * from Admin_FAQ where bno =
		#{bno}
	</select>

	<update id="increaseViewcnt" parameterType="int">
		update Admin_FAQ set
		viewcnt = viewcnt +1 where bno = #{bno}
	</update>

	<update id="updateArticle">
		update Admin_FAQ set title = #{title}, content =
		#{content},menu = #{menu} where bno = #{bno}
	</update>

	<delete id="deleteArticle">
		delete from Admin_FAQ where bno = #{bno}
	</delete>


</mapper>